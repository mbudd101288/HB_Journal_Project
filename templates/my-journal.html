{% extends 'base.html' %}

{% block title %} {{user.fname}}'s Journal {% endblock %}

{% block content %}     

<h1>Week {{prompt.week}}</h1>
<h2>{{prompt.prompt}}</h2>

{% if prompt.bonus_text %}
    
    <button id="bonus_text_button" type="button">More Food for Thought </button>
    <p id="additional_info"></p>

{% endif %}

<form id = entry action="/entry" method="POST">

    {% if entry%}
        <label for="journal_entry"></label>
        <textarea class="entry" id="journal_entry" name="entry" rows="20" cols="100" style="border: none";> {{entry.user_entry}}</textarea><br>
        <input type="hidden" name="entry_id" value={{entry.id}}>
        
    {% else %}
        <label for="journal_entry"></label>
        <textarea  class="entry" id="journal_entry" name="entry" rows="20" cols="100" ></textarea><br>
        <input type="hidden" name="prompt_week" value={{prompt.week}}>
    {% endif %}

    <label for="entry_visibility">Entry Visibility</label>
  <select id= "entry_visibility" name="visibility">
      <option value="Private">Keep this entry private</option>
      <option value="Friends">Share this entry with friends</option>
      <option value="Public">Share this entry with everyone</option>
  </select>
 
  <button class="save_entry" id="entry_button" >Save</button>

</form>

{% if prompt.book %}

     <button id="source_button" type="button" class="btn btn-primary" data-bs-placement="top" data-bs-toggle="tooltip" title="{{prompt.book}}">
        <span><img src="/static/images/book_info_icon.png" title="{{prompt.book}}" alt="tooltip img" width=40px height=40px></span>Prompt Source
    </button>
  
{% endif %}

<script> 
    const targetBtn = document.querySelector("#bonus_text_button");
    targetBtn.addEventListener('click', (evt) => {
        document.querySelector('#additional_info').innerHTML = `{{prompt.bonus_text}}`;
        targetBtn.hidden = "hidden"
        });
        
</script>

<script src='/static/js/button.js'></script>
{% endblock %}

{% block footer %}
<p>Current week: {{session['week']}}</p>
{% endblock %}


<!-- <img id="icon_calendar" src="/static/images/clock_schedule_icon.png" alt="tooltip date img" title="
Current day: {{session['date']}}
Current week: {{session['week']}}
Active since {{user.sign_up}}
"> -->

